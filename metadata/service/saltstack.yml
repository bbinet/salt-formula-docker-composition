parameters:
  docker-composition:
    saltstack:
      type: generic
      enabled: true

      directory:
        saltmaster:
          clean: false
          file:
            etc_salt_master.d/helioslite.conf:
              serialize: yaml
              contents:
                file_roots:
                  base:
                    - /srv/setupify/states
                reclass: &reclass
                  storage_type: yaml_fs
                  inventory_base_uri: /srv/setupify/reclass
                ext_pillar:
                  - reclass: *reclass
                master_tops:
                  reclass: *reclass
                file_ignore_glob:
                  - '*.git*'
                  - '*.pyc'
                  - '*.swp'
                log_level: error
                log_level_logfile: quiet

      compose:
        version: '3.1'
        services:
          saltmaster:
            hostname: saltmaster
            image: bbinet/salt-master:buster_2019.2
            volumes:
              - ./saltmaster/etc_salt_master.d:/etc/salt/master.d
